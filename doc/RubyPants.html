<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class RubyPants - RDoc Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  
<div id="table-of-contents">
  <nav class="section">
    <h3 class="section-header">Table of Contents</h3>
    <ul>
      <li><a href="#label-RubyPants+--+SmartyPants+ported+to+Ruby">RubyPants – SmartyPants ported to Ruby</a>
      <li><a href="#label-Synopsis">Synopsis</a>
      <li><a href="#label-Description">Description</a>
      <li><a href="#label-Backslash+Escapes">Backslash Escapes</a>
      <li><a href="#label-Algorithmic+Shortcomings">Algorithmic Shortcomings</a>
      <li><a href="#label-Bugs">Bugs</a>
      <li><a href="#label-Authors">Authors</a>
      <li><a href="#label-Copyright+and+License">Copyright and License</a>
      <li><a href="#label-SmartyPants+license%3A">SmartyPants license:</a>
      <li><a href="#label-RubyPants+license">RubyPants license</a>
      <li><a href="#label-Links">Links</a>
    </ul>
  </nav>
</div>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>plugins/rubypants.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="String.html">String</a>
  
</nav>

    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-educate_backticks">#educate_backticks</a>
    
    <li ><a href="#method-i-educate_dashes">#educate_dashes</a>
    
    <li ><a href="#method-i-educate_dashes_inverted">#educate_dashes_inverted</a>
    
    <li ><a href="#method-i-educate_dashes_oldschool">#educate_dashes_oldschool</a>
    
    <li ><a href="#method-i-educate_ellipses">#educate_ellipses</a>
    
    <li ><a href="#method-i-educate_quotes">#educate_quotes</a>
    
    <li ><a href="#method-i-educate_single_backticks">#educate_single_backticks</a>
    
    <li ><a href="#method-i-process_escapes">#process_escapes</a>
    
    <li ><a href="#method-i-stupefy_entities">#stupefy_entities</a>
    
    <li ><a href="#method-i-to_html">#to_html</a>
    
    <li ><a href="#method-i-tokenize">#tokenize</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./CHANGELOG_markdown.html">CHANGELOG.markdown</a>
  
    <li class="file"><a href="./Gemfile.html">Gemfile</a>
  
    <li class="file"><a href="./Gemfile_lock.html">Gemfile.lock</a>
  
    <li class="file"><a href="./README_markdown.html">README.markdown</a>
  
    <li class="file"><a href="./Rakefile.html">Rakefile</a>
  
    <li class="file"><a href="./_deploy/assets/jwplayer/glow/glow_xml.html">glow.xml</a>
  
    <li class="file"><a href="./_deploy/atom_xml.html">atom.xml</a>
  
    <li class="file"><a href="./_deploy/blog/2013/06/30/about-octopress/index_html.html">index.html</a>
  
    <li class="file"><a href="./_deploy/blog/archives/index_html.html">index.html</a>
  
    <li class="file"><a href="./_deploy/index_html.html">index.html</a>
  
    <li class="file"><a href="./_deploy/javascripts/github_js.html">github.js</a>
  
    <li class="file"><a href="./_deploy/javascripts/libs/jXHR_js.html">jXHR.js</a>
  
    <li class="file"><a href="./_deploy/javascripts/libs/jquery_min_js.html">jquery.min.js</a>
  
    <li class="file"><a href="./_deploy/javascripts/libs/swfobject-dynamic_js.html">swfobject-dynamic.js</a>
  
    <li class="file"><a href="./_deploy/javascripts/modernizr-2_0_js.html">modernizr-2.0.js</a>
  
    <li class="file"><a href="./_deploy/javascripts/octopress_js.html">octopress.js</a>
  
    <li class="file"><a href="./_deploy/javascripts/pinboard_js.html">pinboard.js</a>
  
    <li class="file"><a href="./_deploy/javascripts/twitter_js.html">twitter.js</a>
  
    <li class="file"><a href="./_deploy/robots_txt.html">robots</a>
  
    <li class="file"><a href="./_deploy/sitemap_xml.html">sitemap.xml</a>
  
    <li class="file"><a href="./_deploy/stylesheets/screen_css.html">screen.css</a>
  
    <li class="file"><a href="./assets/jwplayer/glow/glow_xml.html">glow.xml</a>
  
    <li class="file"><a href="./atom_xml.html">atom.xml</a>
  
    <li class="file"><a href="./blog/2013/06/30/about-octopress/index_html.html">index.html</a>
  
    <li class="file"><a href="./blog/2013/06/30/guan-yu-octopress/index_html.html">index.html</a>
  
    <li class="file"><a href="./blog/2013/06/30/index_html.html">index.html</a>
  
    <li class="file"><a href="./blog/archives/index_html.html">index.html</a>
  
    <li class="file"><a href="./config_ru.html">config.ru</a>
  
    <li class="file"><a href="./doc/created_rid.html">created.rid</a>
  
    <li class="file"><a href="./index_html.html">index.html</a>
  
    <li class="file"><a href="./javascripts/github_js.html">github.js</a>
  
    <li class="file"><a href="./javascripts/libs/jXHR_js.html">jXHR.js</a>
  
    <li class="file"><a href="./javascripts/libs/jquery_min_js.html">jquery.min.js</a>
  
    <li class="file"><a href="./javascripts/libs/swfobject-dynamic_js.html">swfobject-dynamic.js</a>
  
    <li class="file"><a href="./javascripts/modernizr-2_0_js.html">modernizr-2.0.js</a>
  
    <li class="file"><a href="./javascripts/octopress_js.html">octopress.js</a>
  
    <li class="file"><a href="./javascripts/pinboard_js.html">pinboard.js</a>
  
    <li class="file"><a href="./javascripts/twitter_js.html">twitter.js</a>
  
    <li class="file"><a href="./public/assets/jwplayer/glow/glow_xml.html">glow.xml</a>
  
    <li class="file"><a href="./public/atom_xml.html">atom.xml</a>
  
    <li class="file"><a href="./public/blog/2013/06/30/about-octopress/index_html.html">index.html</a>
  
    <li class="file"><a href="./public/blog/archives/index_html.html">index.html</a>
  
    <li class="file"><a href="./public/index_html.html">index.html</a>
  
    <li class="file"><a href="./public/javascripts/github_js.html">github.js</a>
  
    <li class="file"><a href="./public/javascripts/libs/jXHR_js.html">jXHR.js</a>
  
    <li class="file"><a href="./public/javascripts/libs/jquery_min_js.html">jquery.min.js</a>
  
    <li class="file"><a href="./public/javascripts/libs/swfobject-dynamic_js.html">swfobject-dynamic.js</a>
  
    <li class="file"><a href="./public/javascripts/modernizr-2_0_js.html">modernizr-2.0.js</a>
  
    <li class="file"><a href="./public/javascripts/octopress_js.html">octopress.js</a>
  
    <li class="file"><a href="./public/javascripts/pinboard_js.html">pinboard.js</a>
  
    <li class="file"><a href="./public/javascripts/twitter_js.html">twitter.js</a>
  
    <li class="file"><a href="./public/robots_txt.html">robots</a>
  
    <li class="file"><a href="./public/sitemap_xml.html">sitemap.xml</a>
  
    <li class="file"><a href="./public/stylesheets/screen_css.html">screen.css</a>
  
    <li class="file"><a href="./robots_txt.html">robots</a>
  
    <li class="file"><a href="./sass/_base_scss.html">_base.scss</a>
  
    <li class="file"><a href="./sass/_partials_scss.html">_partials.scss</a>
  
    <li class="file"><a href="./sass/base/_layout_scss.html">_layout.scss</a>
  
    <li class="file"><a href="./sass/base/_solarized_scss.html">_solarized.scss</a>
  
    <li class="file"><a href="./sass/base/_theme_scss.html">_theme.scss</a>
  
    <li class="file"><a href="./sass/base/_typography_scss.html">_typography.scss</a>
  
    <li class="file"><a href="./sass/base/_utilities_scss.html">_utilities.scss</a>
  
    <li class="file"><a href="./sass/custom/_colors_scss.html">_colors.scss</a>
  
    <li class="file"><a href="./sass/custom/_fonts_scss.html">_fonts.scss</a>
  
    <li class="file"><a href="./sass/custom/_layout_scss.html">_layout.scss</a>
  
    <li class="file"><a href="./sass/custom/_styles_scss.html">_styles.scss</a>
  
    <li class="file"><a href="./sass/partials/_archive_scss.html">_archive.scss</a>
  
    <li class="file"><a href="./sass/partials/_blog_scss.html">_blog.scss</a>
  
    <li class="file"><a href="./sass/partials/_footer_scss.html">_footer.scss</a>
  
    <li class="file"><a href="./sass/partials/_header_scss.html">_header.scss</a>
  
    <li class="file"><a href="./sass/partials/_navigation_scss.html">_navigation.scss</a>
  
    <li class="file"><a href="./sass/partials/_sharing_scss.html">_sharing.scss</a>
  
    <li class="file"><a href="./sass/partials/_sidebar_scss.html">_sidebar.scss</a>
  
    <li class="file"><a href="./sass/partials/_syntax_scss.html">_syntax.scss</a>
  
    <li class="file"><a href="./sass/partials/sidebar/_base_scss.html">_base.scss</a>
  
    <li class="file"><a href="./sass/partials/sidebar/_delicious_scss.html">_delicious.scss</a>
  
    <li class="file"><a href="./sass/partials/sidebar/_googleplus_scss.html">_googleplus.scss</a>
  
    <li class="file"><a href="./sass/partials/sidebar/_pinboard_scss.html">_pinboard.scss</a>
  
    <li class="file"><a href="./sass/plugins/_plugins_scss.html">_plugins.scss</a>
  
    <li class="file"><a href="./sass/screen_scss.html">screen.scss</a>
  
    <li class="file"><a href="./sitemap_xml.html">sitemap.xml</a>
  
    <li class="file"><a href="./source/_includes/after_footer_html.html">after_footer.html</a>
  
    <li class="file"><a href="./source/_includes/archive_post_html.html">archive_post.html</a>
  
    <li class="file"><a href="./source/_includes/article_html.html">article.html</a>
  
    <li class="file"><a href="./source/_includes/asides/delicious_html.html">delicious.html</a>
  
    <li class="file"><a href="./source/_includes/asides/github_html.html">github.html</a>
  
    <li class="file"><a href="./source/_includes/asides/googleplus_html.html">googleplus.html</a>
  
    <li class="file"><a href="./source/_includes/asides/pinboard_html.html">pinboard.html</a>
  
    <li class="file"><a href="./source/_includes/asides/recent_posts_html.html">recent_posts.html</a>
  
    <li class="file"><a href="./source/_includes/custom/after_footer_html.html">after_footer.html</a>
  
    <li class="file"><a href="./source/_includes/custom/asides/about_html.html">about.html</a>
  
    <li class="file"><a href="./source/_includes/custom/category_feed_xml.html">category_feed.xml</a>
  
    <li class="file"><a href="./source/_includes/custom/footer_html.html">footer.html</a>
  
    <li class="file"><a href="./source/_includes/custom/head_html.html">head.html</a>
  
    <li class="file"><a href="./source/_includes/custom/header_html.html">header.html</a>
  
    <li class="file"><a href="./source/_includes/custom/navigation_html.html">navigation.html</a>
  
    <li class="file"><a href="./source/_includes/disqus_html.html">disqus.html</a>
  
    <li class="file"><a href="./source/_includes/facebook_like_html.html">facebook_like.html</a>
  
    <li class="file"><a href="./source/_includes/footer_html.html">footer.html</a>
  
    <li class="file"><a href="./source/_includes/google_analytics_html.html">google_analytics.html</a>
  
    <li class="file"><a href="./source/_includes/google_plus_one_html.html">google_plus_one.html</a>
  
    <li class="file"><a href="./source/_includes/head_html.html">head.html</a>
  
    <li class="file"><a href="./source/_includes/header_html.html">header.html</a>
  
    <li class="file"><a href="./source/_includes/navigation_html.html">navigation.html</a>
  
    <li class="file"><a href="./source/_includes/post/author_html.html">author.html</a>
  
    <li class="file"><a href="./source/_includes/post/categories_html.html">categories.html</a>
  
    <li class="file"><a href="./source/_includes/post/date_html.html">date.html</a>
  
    <li class="file"><a href="./source/_includes/post/disqus_thread_html.html">disqus_thread.html</a>
  
    <li class="file"><a href="./source/_includes/post/sharing_html.html">sharing.html</a>
  
    <li class="file"><a href="./source/_includes/twitter_sharing_html.html">twitter_sharing.html</a>
  
    <li class="file"><a href="./source/_layouts/category_index_html.html">category_index.html</a>
  
    <li class="file"><a href="./source/_layouts/default_html.html">default.html</a>
  
    <li class="file"><a href="./source/_layouts/page_html.html">page.html</a>
  
    <li class="file"><a href="./source/_layouts/post_html.html">post.html</a>
  
    <li class="file"><a href="./source/_posts/2013-06-30-about-octopress_markdown.html">2013-06-30-about-octopress.markdown</a>
  
    <li class="file"><a href="./source/assets/jwplayer/glow/glow_xml.html">glow.xml</a>
  
    <li class="file"><a href="./source/atom_xml.html">atom.xml</a>
  
    <li class="file"><a href="./source/blog/archives/index_html.html">index.html</a>
  
    <li class="file"><a href="./source/index_html.html">index.html</a>
  
    <li class="file"><a href="./source/javascripts/github_js.html">github.js</a>
  
    <li class="file"><a href="./source/javascripts/libs/jXHR_js.html">jXHR.js</a>
  
    <li class="file"><a href="./source/javascripts/libs/jquery_min_js.html">jquery.min.js</a>
  
    <li class="file"><a href="./source/javascripts/libs/swfobject-dynamic_js.html">swfobject-dynamic.js</a>
  
    <li class="file"><a href="./source/javascripts/modernizr-2_0_js.html">modernizr-2.0.js</a>
  
    <li class="file"><a href="./source/javascripts/octopress_js.html">octopress.js</a>
  
    <li class="file"><a href="./source/javascripts/pinboard_js.html">pinboard.js</a>
  
    <li class="file"><a href="./source/javascripts/twitter_js.html">twitter.js</a>
  
    <li class="file"><a href="./source/robots_txt.html">robots</a>
  
    <li class="file"><a href="./source/stylesheets/screen_css.html">screen.css</a>
  
    <li class="file"><a href="./stylesheets/screen_css.html">screen.css</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./BacktickCodeBlock.html">BacktickCodeBlock</a>
  
    <li><a href="./ConfigTag.html">ConfigTag</a>
  
    <li><a href="./HighlightCode.html">HighlightCode</a>
  
    <li><a href="./Jekyll.html">Jekyll</a>
  
    <li><a href="./Jekyll/Blockquote.html">Jekyll::Blockquote</a>
  
    <li><a href="./Jekyll/CategoryFeed.html">Jekyll::CategoryFeed</a>
  
    <li><a href="./Jekyll/CategoryIndex.html">Jekyll::CategoryIndex</a>
  
    <li><a href="./Jekyll/CodeBlock.html">Jekyll::CodeBlock</a>
  
    <li><a href="./Jekyll/ContentFilters.html">Jekyll::ContentFilters</a>
  
    <li><a href="./Jekyll/Convertible.html">Jekyll::Convertible</a>
  
    <li><a href="./Jekyll/Filters.html">Jekyll::Filters</a>
  
    <li><a href="./Jekyll/GenerateCategories.html">Jekyll::GenerateCategories</a>
  
    <li><a href="./Jekyll/GistTag.html">Jekyll::GistTag</a>
  
    <li><a href="./Jekyll/GistTagNoCache.html">Jekyll::GistTagNoCache</a>
  
    <li><a href="./Jekyll/HamlConverter.html">Jekyll::HamlConverter</a>
  
    <li><a href="./Jekyll/ImageTag.html">Jekyll::ImageTag</a>
  
    <li><a href="./Jekyll/IncludeArrayTag.html">Jekyll::IncludeArrayTag</a>
  
    <li><a href="./Jekyll/IncludeCodeTag.html">Jekyll::IncludeCodeTag</a>
  
    <li><a href="./Jekyll/JsFiddle.html">Jekyll::JsFiddle</a>
  
    <li><a href="./Jekyll/Layout.html">Jekyll::Layout</a>
  
    <li><a href="./Jekyll/Page.html">Jekyll::Page</a>
  
    <li><a href="./Jekyll/Pager.html">Jekyll::Pager</a>
  
    <li><a href="./Jekyll/Pagination.html">Jekyll::Pagination</a>
  
    <li><a href="./Jekyll/Post.html">Jekyll::Post</a>
  
    <li><a href="./Jekyll/PostFilter.html">Jekyll::PostFilter</a>
  
    <li><a href="./Jekyll/PullquoteTag.html">Jekyll::PullquoteTag</a>
  
    <li><a href="./Jekyll/RawTag.html">Jekyll::RawTag</a>
  
    <li><a href="./Jekyll/RenderPartialTag.html">Jekyll::RenderPartialTag</a>
  
    <li><a href="./Jekyll/Site.html">Jekyll::Site</a>
  
    <li><a href="./Jekyll/SitemapFile.html">Jekyll::SitemapFile</a>
  
    <li><a href="./Jekyll/SitemapGenerator.html">Jekyll::SitemapGenerator</a>
  
    <li><a href="./Jekyll/VideoTag.html">Jekyll::VideoTag</a>
  
    <li><a href="./Liquid.html">Liquid</a>
  
    <li><a href="./Object.html">Object</a>
  
    <li><a href="./Octopress.html">Octopress</a>
  
    <li><a href="./Octopress/Date.html">Octopress::Date</a>
  
    <li><a href="./OctopressFilters.html">OctopressFilters</a>
  
    <li><a href="./OctopressLiquidFilters.html">OctopressLiquidFilters</a>
  
    <li><a href="./RubyPants.html">RubyPants</a>
  
    <li><a href="./String.html">String</a>
  
    <li><a href="./TemplateWrapper.html">TemplateWrapper</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class RubyPants</h1>

  <div id="description" class="description">
    
<h1 id="label-RubyPants+--+SmartyPants+ported+to+Ruby"><a href="RubyPants.html">RubyPants</a> – SmartyPants ported to Ruby<span><a href="#label-RubyPants+--+SmartyPants+ported+to+Ruby">&para;</a> <a href="#documentation">&uarr;</a></span></h1>

<h2 id="label-Synopsis">Synopsis<span><a href="#label-Synopsis">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p><a href="RubyPants.html">RubyPants</a> is a Ruby port of the smart-quotes
library SmartyPants.</p>

<p>The original “SmartyPants” is a free web publishing plug-in for Movable
Type, Blosxom, and BBEdit that easily translates plain ASCII punctuation
characters into “smart” typographic punctuation HTML entities.</p>

<h2 id="label-Description">Description<span><a href="#label-Description">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p><a href="RubyPants.html">RubyPants</a> can perform the following
transformations:</p>
<ul><li>
<p>Straight quotes (<code>&quot;</code> and <code>&#39;</code>) into “curly”
quote HTML entities</p>
</li><li>
<p>Backticks-style quotes (<code>``like this&#39;&#39;</code>) into “curly”
quote HTML entities</p>
</li><li>
<p>Dashes (<code>--</code> and <code>---</code>) into en- and em-dash entities</p>
</li><li>
<p>Three consecutive dots (<code>...</code> or <code>. . .</code>) into an
ellipsis entity</p>
</li></ul>

<p>This means you can write, edit, and save your posts using plain old ASCII
straight quotes, plain dashes, and plain dots, but your published posts
(and final HTML output) will appear with smart quotes, em-dashes, and
proper ellipses.</p>

<p><a href="RubyPants.html">RubyPants</a> does not modify characters within
<code>&lt;pre&gt;</code>, <code>&lt;code&gt;</code>,
<code>&lt;kbd&gt;</code>, <code>&lt;math&gt;</code> or
<code>&lt;script&gt;</code> tag blocks. Typically, these tags are used to
display text where smart quotes and other “smart punctuation” would not be
appropriate, such as source code or example markup.</p>

<h2 id="label-Backslash+Escapes">Backslash Escapes<span><a href="#label-Backslash+Escapes">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>If you need to use literal straight quotes (or plain hyphens and periods),
<a href="RubyPants.html">RubyPants</a> accepts the following backslash
escape sequences to force non-smart punctuation. It does so by transforming
the escape sequence into a decimal-encoded HTML entity:</p>

<pre>\\    \&quot;    \&#39;    \.    \-    \`</pre>

<p>This is useful, for example, when you want to use straight quotes as foot
and inch marks: 6&#39;2“ tall; a 17” iMac.  (Use
<code>6\&#39;2\&quot;</code> resp. <code>17\&quot;</code>.)</p>

<h2 id="label-Algorithmic+Shortcomings">Algorithmic Shortcomings<span><a href="#label-Algorithmic+Shortcomings">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>One situation in which quotes will get curled the wrong way is when
apostrophes are used at the start of leading contractions. For example:</p>

<pre>&#39;Twas the night before Christmas.</pre>

<p>In the case above, <a href="RubyPants.html">RubyPants</a> will turn the
apostrophe into an opening single-quote, when in fact it should be a
closing one. I don&#39;t think this problem can be solved in the general
case–every word processor I&#39;ve tried gets this wrong as well. In such
cases, it&#39;s best to use the proper HTML entity for closing
single-quotes (“<code>&amp;#8217;</code>”) by hand.</p>

<h2 id="label-Bugs">Bugs<span><a href="#label-Bugs">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>To file bug reports or feature requests (except see above) please send
email to: <a
href="mailto:chneukirchen@gmail.com">chneukirchen@gmail.com</a></p>

<p>If the bug involves quotes being curled the wrong way, please send example
text to illustrate.</p>

<h2 id="label-Authors">Authors<span><a href="#label-Authors">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>John Gruber did all of the hard work of writing this software in Perl for
Movable Type and almost all of this useful documentation. Chad Miller
ported it to Python to use with Pyblosxom.</p>

<p>Christian Neukirchen provided the Ruby port, as a general-purpose library
that follows the *Cloth API.</p>

<h2 id="label-Copyright+and+License">Copyright and License<span><a href="#label-Copyright+and+License">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<h3 id="label-SmartyPants+license%3A">SmartyPants license:<span><a href="#label-SmartyPants+license%3A">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Copyright © 2003 John Gruber (<a
href="http://daringfireball.net">daringfireball.net</a>) All rights
reserved.</p>

<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:</p>
<ul><li>
<p>Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.</p>
</li><li>
<p>Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution.</p>
</li><li>
<p>Neither the name “SmartyPants” nor the names of its contributors may be
used to endorse or promote products derived from this software without
specific prior written permission.</p>
</li></ul>

<p>This software is provided by the copyright holders and contributors “as is”
and any express or implied warranties, including, but not limited to, the
implied warranties of merchantability and fitness for a particular purpose
are disclaimed. In no event shall the copyright owner or contributors be
liable for any direct, indirect, incidental, special, exemplary, or
consequential damages (including, but not limited to, procurement of
substitute goods or services; loss of use, data, or profits; or business
interruption) however caused and on any theory of liability, whether in
contract, strict liability, or tort (including negligence or otherwise)
arising in any way out of the use of this software, even if advised of the
possibility of such damage.</p>

<h3 id="label-RubyPants+license"><a href="RubyPants.html">RubyPants</a> license<span><a href="#label-RubyPants+license">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p><a href="RubyPants.html">RubyPants</a> is a derivative work of SmartyPants
and smartypants.py.</p>

<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:</p>
<ul><li>
<p>Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.</p>
</li><li>
<p>Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution.</p>
</li></ul>

<p>This software is provided by the copyright holders and contributors “as is”
and any express or implied warranties, including, but not limited to, the
implied warranties of merchantability and fitness for a particular purpose
are disclaimed. In no event shall the copyright owner or contributors be
liable for any direct, indirect, incidental, special, exemplary, or
consequential damages (including, but not limited to, procurement of
substitute goods or services; loss of use, data, or profits; or business
interruption) however caused and on any theory of liability, whether in
contract, strict liability, or tort (including negligence or otherwise)
arising in any way out of the use of this software, even if advised of the
possibility of such damage.</p>

<h2 id="label-Links">Links<span><a href="#label-Links">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
<dl class="rdoc-list note-list"><dt>John Gruber
<dd>
<p><a href="http://daringfireball.net">daringfireball.net</a></p>
</dd><dt>SmartyPants
<dd>
<p><a
href="http://daringfireball.net/projects/smartypants">daringfireball.net/projects/smartypants</a></p>
</dd><dt>Chad Miller
<dd>
<p><a href="http://web.chad.org">web.chad.org</a></p>
</dd><dt>Christian Neukirchen
<dd>
<p><a href="http://kronavita.de/chris">kronavita.de/chris</a></p>
</dd></dl>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(string, options=[2])</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a new <a href="RubyPants.html">RubyPants</a> instance with the text
in <code>string</code>.</p>

<p>Allowed elements in the options array:</p>
<dl class="rdoc-list note-list"><dt>0  
<dd>
<p>do nothing</p>
</dd><dt>1  
<dd>
<p>enable all, using only em-dash shortcuts</p>
</dd><dt>2  
<dd>
<p>enable all, using old school en- and em-dash shortcuts
(<strong>default</strong>)</p>
</dd><dt>3  
<dd>
<p>enable all, using inverted old school en and em-dash shortcuts</p>
</dd><dt>-1 
<dd>
<p>stupefy (translate HTML entities to their ASCII-counterparts)</p>
</dd></dl>

<p>If you don&#39;t like any of these defaults, you can pass symbols to change
RubyPants&#39; behavior:</p>
<dl class="rdoc-list note-list"><dt><code>:quotes</code>        
<dd>
<p>quotes</p>
</dd><dt><code>:backticks</code>     
<dd>
<p>backtick quotes (“double&#39;&#39; only)</p>
</dd><dt><code>:allbackticks</code>  
<dd>
<p>backtick quotes (“double&#39;&#39; and `single&#39;)</p>
</dd><dt><code>:dashes</code>        
<dd>
<p>dashes</p>
</dd><dt><code>:oldschool</code>     
<dd>
<p>old school dashes</p>
</dd><dt><code>:inverted</code>      
<dd>
<p>inverted old school dashes</p>
</dd><dt><code>:ellipses</code>      
<dd>
<p>ellipses</p>
</dd><dt><code>:convertquotes</code> 
<dd>
<p>convert <code>&amp;quot;</code> entities to <code>&quot;</code> for
Dreamweaver users</p>
</dd><dt><code>:stupefy</code>       
<dd>
<p>translate <a href="RubyPants.html">RubyPants</a> HTML entities to their
ASCII counterparts.</p>
</dd></dl>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 206</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">options</span>=[<span class="ruby-value">2</span>])
  <span class="ruby-keyword">super</span> <span class="ruby-identifier">string</span>
  <span class="ruby-ivar">@options</span> = [<span class="ruby-operator">*</span><span class="ruby-identifier">options</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-to_html" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_html</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Apply SmartyPants transformations.</p>
          
          

          
          <div class="method-source-code" id="to_html-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 212</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_html</span>
  <span class="ruby-identifier">do_quotes</span> = <span class="ruby-identifier">do_backticks</span> = <span class="ruby-identifier">do_dashes</span> = <span class="ruby-identifier">do_ellipses</span> = <span class="ruby-identifier">do_stupify</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">convert_quotes</span> = <span class="ruby-keyword">false</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">0</span>
    <span class="ruby-comment"># Do nothing.</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">1</span>
    <span class="ruby-comment"># Do everything, turn all options on.</span>
    <span class="ruby-identifier">do_quotes</span> = <span class="ruby-identifier">do_backticks</span> = <span class="ruby-identifier">do_ellipses</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">do_dashes</span> = <span class="ruby-value">:normal</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">2</span>
    <span class="ruby-comment"># Do everything, turn all options on, use old school dash shorthand.</span>
    <span class="ruby-identifier">do_quotes</span> = <span class="ruby-identifier">do_backticks</span> = <span class="ruby-identifier">do_ellipses</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">do_dashes</span> = <span class="ruby-value">:oldschool</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">3</span>
    <span class="ruby-comment"># Do everything, turn all options on, use inverted old school</span>
    <span class="ruby-comment"># dash shorthand.</span>
    <span class="ruby-identifier">do_quotes</span> = <span class="ruby-identifier">do_backticks</span> = <span class="ruby-identifier">do_ellipses</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">do_dashes</span> = <span class="ruby-value">:inverted</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">-1</span>)
    <span class="ruby-identifier">do_stupefy</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">do_quotes</span> =                <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:quotes</span>
    <span class="ruby-identifier">do_backticks</span> =             <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:backticks</span>
    <span class="ruby-identifier">do_backticks</span> = <span class="ruby-value">:both</span>    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:allbackticks</span>
    <span class="ruby-identifier">do_dashes</span> = <span class="ruby-value">:normal</span>     <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:dashes</span>
    <span class="ruby-identifier">do_dashes</span> = <span class="ruby-value">:oldschool</span>  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:oldschool</span>
    <span class="ruby-identifier">do_dashes</span> = <span class="ruby-value">:inverted</span>   <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:inverted</span>
    <span class="ruby-identifier">do_ellipses</span> =              <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:ellipses</span>
    <span class="ruby-identifier">convert_quotes</span> =           <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:convertquotes</span>
    <span class="ruby-identifier">do_stupefy</span> =               <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value">:stupefy</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Parse the HTML</span>
  <span class="ruby-identifier">tokens</span> = <span class="ruby-identifier">tokenize</span>

  <span class="ruby-comment"># Keep track of when we&#39;re inside &lt;pre&gt; or &lt;code&gt; tags.</span>
  <span class="ruby-identifier">in_pre</span> = <span class="ruby-keyword">false</span>

  <span class="ruby-comment"># Here is the result stored in.</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-string">&quot;&quot;</span>

  <span class="ruby-comment"># This is a cheat, used to get some context for one-character</span>
  <span class="ruby-comment"># tokens that consist of just a quote char. What we do is remember</span>
  <span class="ruby-comment"># the last character of the previous text token, to use as context</span>
  <span class="ruby-comment"># to curl single- character quote tokens correctly.</span>
  <span class="ruby-identifier">prev_token_last_char</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-identifier">tokens</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">token</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-value">:tag</span>
      <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">1</span>]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp">%r&lt;(/?)(?:pre|code|kbd|script|math)[\s&gt;]!</span>
        <span class="ruby-identifier">in_pre</span> = (<span class="ruby-node">$1</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;/&quot;</span>)  <span class="ruby-comment"># Opening or closing tag?</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">t</span> = <span class="ruby-identifier">token</span>[<span class="ruby-value">1</span>]

      <span class="ruby-comment"># Remember last char of this token before processing.</span>
      <span class="ruby-identifier">last_char</span> = <span class="ruby-identifier">t</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">chr</span>

      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">in_pre</span>
        <span class="ruby-identifier">t</span> = <span class="ruby-identifier">process_escapes</span> <span class="ruby-identifier">t</span>

        <span class="ruby-identifier">t</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/&amp;quot;/</span>, <span class="ruby-string">&#39;&quot;&#39;</span>)  <span class="ruby-keyword">if</span> <span class="ruby-identifier">convert_quotes</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_dashes</span>
          <span class="ruby-identifier">t</span> = <span class="ruby-identifier">educate_dashes</span> <span class="ruby-identifier">t</span>            <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_dashes</span> <span class="ruby-operator">==</span> <span class="ruby-value">:normal</span>
          <span class="ruby-identifier">t</span> = <span class="ruby-identifier">educate_dashes_oldschool</span> <span class="ruby-identifier">t</span>  <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_dashes</span> <span class="ruby-operator">==</span> <span class="ruby-value">:oldschool</span>
          <span class="ruby-identifier">t</span> = <span class="ruby-identifier">educate_dashes_inverted</span> <span class="ruby-identifier">t</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_dashes</span> <span class="ruby-operator">==</span> <span class="ruby-value">:inverted</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">t</span> = <span class="ruby-identifier">educate_ellipses</span> <span class="ruby-identifier">t</span>  <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_ellipses</span>

        <span class="ruby-comment"># Note: backticks need to be processed before quotes.</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_backticks</span>
          <span class="ruby-identifier">t</span> = <span class="ruby-identifier">educate_backticks</span> <span class="ruby-identifier">t</span>
          <span class="ruby-identifier">t</span> = <span class="ruby-identifier">educate_single_backticks</span> <span class="ruby-identifier">t</span>  <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_backticks</span> <span class="ruby-operator">==</span> <span class="ruby-value">:both</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_quotes</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">t</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;&#39;&quot;</span>
            <span class="ruby-comment"># Special case: single-character &#39; token</span>
            <span class="ruby-keyword">if</span> <span class="ruby-identifier">prev_token_last_char</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\S/</span>
              <span class="ruby-identifier">t</span> = <span class="ruby-node">&quot;&amp;#8217;&quot;</span>
            <span class="ruby-keyword">else</span>
              <span class="ruby-identifier">t</span> = <span class="ruby-node">&quot;&amp;#8216;&quot;</span>
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">t</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;&quot;&#39;</span>
            <span class="ruby-comment"># Special case: single-character &quot; token</span>
            <span class="ruby-keyword">if</span> <span class="ruby-identifier">prev_token_last_char</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\S/</span>
              <span class="ruby-identifier">t</span> = <span class="ruby-node">&quot;&amp;#8221;&quot;</span>
            <span class="ruby-keyword">else</span>
              <span class="ruby-identifier">t</span> = <span class="ruby-node">&quot;&amp;#8220;&quot;</span>
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">else</span>
            <span class="ruby-comment"># Normal case:</span>
            <span class="ruby-identifier">t</span> = <span class="ruby-identifier">educate_quotes</span> <span class="ruby-identifier">t</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">t</span> = <span class="ruby-identifier">stupefy_entities</span> <span class="ruby-identifier">t</span>  <span class="ruby-keyword">if</span> <span class="ruby-identifier">do_stupefy</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">prev_token_last_char</span> = <span class="ruby-identifier">last_char</span>
      <span class="ruby-identifier">result</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">t</span>
    <span class="ruby-keyword">end</span>
  }

  <span class="ruby-comment"># Done</span>
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- to_html-source -->
          
        </div>

        

        
      </div><!-- to_html-method -->

    
    </section><!-- public-instance-method-details -->
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Protected Instance Methods</h3>

    
      <div id="method-i-educate_backticks" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">educate_backticks</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the string, with “<code>``backticks&#39;&#39;</code>”-style single
quotes translated into HTML curly quote entities.</p>
          
          

          
          <div class="method-source-code" id="educate_backticks-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 383</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">educate_backticks</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;``&quot;</span>, <span class="ruby-string">&#39;&amp;#8220;&#39;</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;&#39;&#39;&quot;</span>, <span class="ruby-string">&#39;&amp;#8221;&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- educate_backticks-source -->
          
        </div>

        

        
      </div><!-- educate_backticks-method -->

    
      <div id="method-i-educate_dashes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">educate_dashes</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The string, with each instance of “<code>--</code>” translated to an
em-dash HTML entity.</p>
          
          

          
          <div class="method-source-code" id="educate_dashes-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 346</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">educate_dashes</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/--/</span>, <span class="ruby-string">&#39;&amp;#8212;&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- educate_dashes-source -->
          
        </div>

        

        
      </div><!-- educate_dashes-method -->

    
      <div id="method-i-educate_dashes_inverted" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">educate_dashes_inverted</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the string, with each instance of “<code>--</code>” translated to an
em-dash HTML entity, and each “<code>---</code>” translated to an en-dash
HTML entity. Two reasons why: First, unlike the en- and em-dash syntax
supported by <code>educate_dashes_oldschool</code>, it&#39;s compatible
with existing entries written before SmartyPants 1.1, back when
“<code>--</code>” was only used for em-dashes.  Second, em-dashes are more
common than en-dashes, and so it sort of makes sense that the shortcut
should be shorter to type. (Thanks to Aaron Swartz for the idea.)</p>
          
          

          
          <div class="method-source-code" id="educate_dashes_inverted-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 368</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">educate_dashes_inverted</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/---/</span>, <span class="ruby-string">&#39;&amp;#8211;&#39;</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/--/</span>, <span class="ruby-string">&#39;&amp;#8212;&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- educate_dashes_inverted-source -->
          
        </div>

        

        
      </div><!-- educate_dashes_inverted-method -->

    
      <div id="method-i-educate_dashes_oldschool" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">educate_dashes_oldschool</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The string, with each instance of “<code>--</code>” translated to an
en-dash HTML entity, and each “<code>---</code>” translated to an em-dash
HTML entity.</p>
          
          

          
          <div class="method-source-code" id="educate_dashes_oldschool-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 354</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">educate_dashes_oldschool</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/---/</span>, <span class="ruby-string">&#39;&amp;#8212;&#39;</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/--/</span>, <span class="ruby-string">&#39;&amp;#8211;&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- educate_dashes_oldschool-source -->
          
        </div>

        

        
      </div><!-- educate_dashes_oldschool-method -->

    
      <div id="method-i-educate_ellipses" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">educate_ellipses</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the string, with each instance of “<code>...</code>” translated to
an ellipsis HTML entity. Also converts the case where there are spaces
between the dots.</p>
          
          

          
          <div class="method-source-code" id="educate_ellipses-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 376</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">educate_ellipses</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;...&#39;</span>, <span class="ruby-string">&#39;&amp;#8230;&#39;</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;. . .&#39;</span>, <span class="ruby-string">&#39;&amp;#8230;&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- educate_ellipses-source -->
          
        </div>

        

        
      </div><!-- educate_ellipses-method -->

    
      <div id="method-i-educate_quotes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">educate_quotes</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the string, with “educated” curly quote HTML entities.</p>
          
          

          
          <div class="method-source-code" id="educate_quotes-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 396</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">educate_quotes</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">punct_class</span> = <span class="ruby-string">&#39;[!&quot;#\$\%\()*+,\-.\/:;&lt;=&gt;?\@\[\\\]\^_`{|}~]&#39;</span>

  <span class="ruby-identifier">str</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">dup</span>

  <span class="ruby-comment"># Special case if the very first character is a quote followed by</span>
  <span class="ruby-comment"># punctuation at a non-word-break. Close the quotes by brute</span>
  <span class="ruby-comment"># force:</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/^&#39;(?=#{punct_class}\B)/</span>, <span class="ruby-string">&#39;&amp;#8217;&#39;</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/^&quot;(?=#{punct_class}\B)/</span>, <span class="ruby-string">&#39;&amp;#8221;&#39;</span>)

  <span class="ruby-comment"># Special case for double sets of quotes, e.g.:</span>
  <span class="ruby-comment">#   &lt;p&gt;He said, &quot;&#39;Quoted&#39; words in a larger quote.&quot;&lt;/p&gt;</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/&quot;&#39;(?=\w)/</span>, <span class="ruby-string">&#39;&amp;#8220;&amp;#8216;&#39;</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/&#39;&quot;(?=\w)/</span>, <span class="ruby-string">&#39;&amp;#8216;&amp;#8220;&#39;</span>)

  <span class="ruby-comment"># Special case for decade abbreviations (the &#39;80s):</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/&#39;(?=\d\ds)/</span>, <span class="ruby-string">&#39;&amp;#8217;&#39;</span>)

  <span class="ruby-identifier">close_class</span> = <span class="ruby-string">%Q[^\ \t\r\n\\[\{\(\-]!</span>
  <span class="ruby-identifier">dec_dashes</span> = <span class="ruby-string">&#39;&amp;#8211;|&amp;#8212;&#39;</span>

  <span class="ruby-comment"># Get most opening single quotes:</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/(\s|&amp;nbsp;|--|&amp;[mn]dash;|#{dec_dashes}|&amp;#x201[34];)&#39;(?=\w)/</span>,
           <span class="ruby-string">&#39;\1&amp;#8216;&#39;</span>)
  <span class="ruby-comment"># Single closing quotes:</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/(#{close_class})&#39;/</span>, <span class="ruby-string">&#39;\1&amp;#8217;&#39;</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/&#39;(\s|s\b|$)/</span>, <span class="ruby-string">&#39;&amp;#8217;\1&#39;</span>)
  <span class="ruby-comment"># Any remaining single quotes should be opening ones:</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/&#39;/</span>, <span class="ruby-string">&#39;&amp;#8216;&#39;</span>)

  <span class="ruby-comment"># Get most opening double quotes:</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/(\s|&amp;nbsp;|--|&amp;[mn]dash;|#{dec_dashes}|&amp;#x201[34];)&quot;(?=\w)/</span>,
           <span class="ruby-string">&#39;\1&amp;#8220;&#39;</span>)
  <span class="ruby-comment"># Double closing quotes:</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-node">/(#{close_class})&quot;/</span>, <span class="ruby-string">&#39;\1&amp;#8221;&#39;</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/&quot;(\s|s\b|$)/</span>, <span class="ruby-string">&#39;&amp;#8221;\1&#39;</span>)
  <span class="ruby-comment"># Any remaining quotes should be opening ones:</span>
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/&quot;/</span>, <span class="ruby-string">&#39;&amp;#8220;&#39;</span>)

  <span class="ruby-identifier">str</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- educate_quotes-source -->
          
        </div>

        

        
      </div><!-- educate_quotes-method -->

    
      <div id="method-i-educate_single_backticks" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">educate_single_backticks</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the string, with “<code>`backticks&#39;</code>”-style single quotes
translated into HTML curly quote entities.</p>
          
          

          
          <div class="method-source-code" id="educate_single_backticks-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 390</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">educate_single_backticks</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;`&quot;</span>, <span class="ruby-string">&#39;&amp;#8216;&#39;</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;&#39;&quot;</span>, <span class="ruby-string">&#39;&amp;#8217;&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- educate_single_backticks-source -->
          
        </div>

        

        
      </div><!-- educate_single_backticks-method -->

    
      <div id="method-i-process_escapes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">process_escapes</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the string, with after processing the following backslash escape
sequences. This is useful if you want to force a “dumb” quote or other
character to appear.</p>

<p>Escaped are:</p>

<pre>\\    \&quot;    \&#39;    \.    \-    \`</pre>
          
          

          
          <div class="method-source-code" id="process_escapes-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 334</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">process_escapes</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;\\&#39;</span>, <span class="ruby-string">&#39;&amp;#92;&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;\&quot;&#39;</span>, <span class="ruby-string">&#39;&amp;#34;&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\&#39;&quot;</span>, <span class="ruby-string">&#39;&amp;#39;&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;\.&#39;</span>, <span class="ruby-string">&#39;&amp;#46;&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;\-&#39;</span>, <span class="ruby-string">&#39;&amp;#45;&#39;</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;\`&#39;</span>, <span class="ruby-string">&#39;&amp;#96;&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- process_escapes-source -->
          
        </div>

        

        
      </div><!-- process_escapes-method -->

    
      <div id="method-i-stupefy_entities" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stupefy_entities</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the string, with each <a href="RubyPants.html">RubyPants</a> HTML
entity translated to its ASCII counterpart.</p>

<p>Note: This is not reversible (but exactly the same as in SmartyPants)</p>
          
          

          
          <div class="method-source-code" id="stupefy_entities-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 444</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stupefy_entities</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">str</span>.
    <span class="ruby-identifier">gsub</span>(<span class="ruby-node">/&amp;#8211;/</span>, <span class="ruby-string">&#39;-&#39;</span>).      <span class="ruby-comment"># en-dash</span>
    <span class="ruby-identifier">gsub</span>(<span class="ruby-node">/&amp;#8212;/</span>, <span class="ruby-string">&#39;--&#39;</span>).     <span class="ruby-comment"># em-dash</span>

    <span class="ruby-identifier">gsub</span>(<span class="ruby-node">/&amp;#8216;/</span>, <span class="ruby-string">&quot;&#39;&quot;</span>).      <span class="ruby-comment"># open single quote</span>
    <span class="ruby-identifier">gsub</span>(<span class="ruby-node">/&amp;#8217;/</span>, <span class="ruby-string">&quot;&#39;&quot;</span>).      <span class="ruby-comment"># close single quote</span>

    <span class="ruby-identifier">gsub</span>(<span class="ruby-node">/&amp;#8220;/</span>, <span class="ruby-string">&#39;&quot;&#39;</span>).      <span class="ruby-comment"># open double quote</span>
    <span class="ruby-identifier">gsub</span>(<span class="ruby-node">/&amp;#8221;/</span>, <span class="ruby-string">&#39;&quot;&#39;</span>).      <span class="ruby-comment"># close double quote</span>

    <span class="ruby-identifier">gsub</span>(<span class="ruby-node">/&amp;#8230;/</span>, <span class="ruby-string">&#39;...&#39;</span>)     <span class="ruby-comment"># ellipsis</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- stupefy_entities-source -->
          
        </div>

        

        
      </div><!-- stupefy_entities-method -->

    
      <div id="method-i-tokenize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">tokenize</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return an array of the tokens comprising the string. Each token is either a
tag (possibly with nested, tags contained therein, such as <code>&lt;a
href=&quot;&lt;MTFoo&gt;&quot;&gt;</code>, or a run of text between tags.
Each element of the array is a two-element array; the first is either :tag
or :text; the second is the actual value.</p>

<p>Based on the <code>_tokenize()</code> subroutine from Brad Choate&#39;s
MTRegex plugin.  &lt;<a
href="http://www.bradchoate.com/past/mtregex.php">www.bradchoate.com/past/mtregex.php</a>&gt;</p>

<p>This is actually the easier variant using tag_soup, as used by Chad Miller
in the Python port of SmartyPants.</p>
          
          

          
          <div class="method-source-code" id="tokenize-source">
            <pre><span class="ruby-comment"># File plugins/rubypants.rb, line 470</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tokenize</span>
  <span class="ruby-identifier">tag_soup</span> = <span class="ruby-regexp">/([^&lt;]*)(&lt;[^&gt;]*&gt;)/</span>

  <span class="ruby-identifier">tokens</span> = []

  <span class="ruby-identifier">prev_end</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">scan</span>(<span class="ruby-identifier">tag_soup</span>) {
    <span class="ruby-identifier">tokens</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-value">:text</span>, <span class="ruby-node">$1</span>]  <span class="ruby-keyword">if</span> <span class="ruby-node">$1</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-identifier">tokens</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-value">:tag</span>, <span class="ruby-node">$2</span>]

    <span class="ruby-identifier">prev_end</span> = <span class="ruby-identifier">$~</span>.<span class="ruby-identifier">end</span>(<span class="ruby-value">0</span>)
  }

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">prev_end</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">size</span>
    <span class="ruby-identifier">tokens</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-value">:text</span>, <span class="ruby-keyword">self</span>[<span class="ruby-identifier">prev_end</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]]
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">tokens</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- tokenize-source -->
          
        </div>

        

        
      </div><!-- tokenize-method -->

    
    </section><!-- protected-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.0.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

